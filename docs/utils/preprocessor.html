<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Article XXX</TITLE>
<LINK href="source/styles.css" type=text/css rel=STYLESHEET>
</HEAD>
<BODY topmargin="5" leftmargin="0" bgcolor="#fffdfd" >

<CENTER>
<TABLE cellspacing="0" cellpadding="0" width="630" border="0">
    <TR><TD class="box" HEIGHT="30" bgColor=#004ba7 >
		<p class="header">&nbsp;<A class = "header_lnk" href="http://clootie.narod.ru">Clootie graphics pages</a> - 
		<A class = "header_lnk" href="http://clootie.narod.ru/articles.html">Articles</a>
		</p>
	</TD></TR>
    <TR><TD class="box" HEIGHT="25" bgColor=#007bd7>
	  <div class="header_title">&nbsp;Pascal preprocessor / description</div>
	</TD></TR>
</TABLE>

<TABLE cellspacing="0" cellpadding="0" width="630" border="0">
<TR>
<TD vAlign=top>&nbsp;&nbsp; </TD></TR>
<TR>
<TD>
	<TABLE class="nzone" cellSpacing="0" cellPadding="5" width="100%" bgColor=#d0e8ff border=0>
	<TR>
	<TD>


<!-- ======================== Finally text here ========================== -->

This is description of parameters and demos supplied with Pascal preprocessor v.0.9 beta release
<br>

<menu><strong>Contents</strong>
<li><a href="#about">About</a>
<li><a href="#parameters">Command line parameters</a>
<li><a href="#usage">Examples of usage</a>
<li><a href="#find">Where to find it?</a>
</menu>


<!-- ================================================== -->
<a name="about"><h4><hr>About</h4></a>
<strong>Pascal Preprocessor</strong> is preprocessing utility what is targetted to be able to do 
any preprocessing what can be done with Delphi5 preprocessor. <br>
<menu><strong>Utility can</strong>
<li>it really can preprocess source pascal files;
<li>remove comments;
<li>remove pointer additional compiler directives, like {$HPPEMIT xxx};
<li>treat passed symbols as "defined" or on the contrary treat all symbols except passed as 
	"defined";
<li>can skip pointed symbols during preprocessing - leaving them in output (or on the contrary 
	process only pointer symbold) - this is independant on previous point so symbol can be marked 
	as "undefined" and "to be precessed" in the same time;
<li>expand INC files or leave them as directives (but looking inside them);
<li>have options to leave/replace original files, their timestamps;
<li>"intelligently" remove lines with preprocessed directives to produce "right" formatted texts;
<li>count statistics on how preprocessing directives are used in source files;
<li>have predefined preprocessor states for different compilers
</menu>

<menu><strong>To be done to 1.0 release version</strong>
<li>add correct handling of {$IFOPT} directives
</menu>

<menu><strong>What it can't do? </strong>
<li>currently preprocessor can't handle Delphi6 and Kylix enhanced {$IF xxx} directive (and this 
	is not planned for 1.0 release)
</menu>


<!-- ================================================== -->
<a name="parameters"><h4><hr>
Parameters</h4></a>

<strong>Syntax:</strong><br>
&nbsp;&nbsp;&nbsp;ppp.exe [-options] &lt;input files&gt;...<br><br>

<table border=1>
<tr>
<td><b>Option</b></td>
	<td><b>Description</b></td></tr>
<td><b>h</b>, <b>?</b></td>
	<td>help screen</td></tr>
<td><b>c</b></td>
	<td>Process conditional directives</td></tr>
<td><b>s</b>xxx</td>
	<td>Simulates one of pascal compilers (initial state of options and defined symbols). 
	Currently supported: "-sDelphi" -  Delphi (generic; "-sDelphi5" - 5.0; "-sDelphi6" - 6.0); 
	generic Kylix - "-sKylix"; "-sTMT" - TMT pascal ("-sTMT3" - 3.0; "-sTMT4" - 4.0) (see ppp.ini file)</td></tr>
<td><b>i</b></td>
	<td>Process include files (inserting their contents in source file)</td></tr>
<td><b>C</b></td>
	<td>Strip comments from source file</td></tr>
<td><b>t</b></td>
	<td>Assign old timestamps to output files</td></tr>
<td><b>r</b></td>
	<td>Rename old files to .bak and write new files to original filename (by default generated 
	files saved with "pi" extention)</td></tr>
<td><b>u</b></td>
	<td>Count statistics on define usage (have to be used with "c" switch). In this case only 
	"i,c,p,b,xp,xb" options are meaningfull/</td></tr>
<td><b>p</b>xxx</td>
	<td>Add "xxx" to include path</td></tr>
<td><b>d</b>xxx</td>
	<td>Define "xxx" as a preprocessor conditional symbol (in addition to standart - already 
	defined if you are used "-sxxx" switch)</td></tr>
<td><b>g</b>xxx</td>
	<td>Passthrough any conditional defines using "xxx" symbol</td></tr>
<td><b>b</b>xxx</td>
	<td>Process includes with filanemes xxx for defines, but bypass include text and leave in 
	source original include compiler directive</td></tr>
<td><b>y</b>xxx</td>
	<td>Strip xxx compiler directives. This option let you remove non-needed compiler directives. 
	For example Delphi 4 and later allows {$NODEFINE} etc. class of compiler directives, but 
	Delphi3 and pre versions will not compile source file with these directives treating them as 
	errors</td></tr>
<td><b>xd</b>, <b>xg</b>, <b>xb</b></td>
	<td>Invert meanings of "d, g, b" options so they mean: all but defined.</td></tr>
</table>

<menu><b><i>Notes:</i></b>
<li>Options "-i -c -C" are assumed if nothing is selected.
<li>Preprocessed files will be written to new files with extension .pi
<li>WARNING: If the new filenames already exist, they will be deleted without warning.
</menu>


<!-- ================================================== -->
<a name="usage"><h4><hr>
Examples of usage</h4></a>
All examples can be found in pascal preprocessor redistributive (link to it can be found at bottom 
of the page). Examples are placed in "ExN" directories (N - is example number).<br><br>

<TABLE cellSpacing=2 cellPadding=5 width=100% border=0>
<TR><TD class="nzone" bgColor=#ffdcd4>
	<h5>Example 1</h5>
	
	This is example of simplest usage. Just point pascal source file to preprocess. Just:<br>
	<b>&nbsp;&nbsp;&nbsp;ppp.exe _test.pas</b><br><br>
	
	After executing "test.bat" file you can see output in "_test.pi" file. 
	Look inside it and compare this file to it source "_test.pas".
</TD></TR>
</TABLE><br>

<TABLE cellSpacing=2 cellPadding=5 width=100% border=0>
<TR><TD class="nzone" bgColor=#ffdcd4>
	<h5>Example 2</h5>
	
	This is example uses the same "_test.pas" source file, but with extended command line options:<br>
	<b>&nbsp;&nbsp;&nbsp;ppp.exe -sDelphi6 -c -t -dMMM -gMMM _test.pas</b><br><br>

	So we simulate Delphi6 compiler (-sDelphi6) with preprocessing conditional defines (-c), 
	creating output file with same timestamp as original source file (-t). Next we define "MMM" 
	symbol (-dMMM) - this is the same as you add "-%&lt;dir&gt;" directive to Delphi command line 
	compiler. Adn finally instruct preprocesssor to leave directives with "MMM" in original source file.<br>
	<br>
	After executing "test.bat" file you could point your attention to what happened to lines of 
	source file guarded by {$IFDEF KKK} - they got included in output file! This is because we 
	defined "MMM" symbol and althrow we leave it in output file, but internal block guarded by 
	{$IFDEF MMM} directive still parsed and {$DEFINE KKK} directive take action.
</TD></TR>
</TABLE><br>

<TABLE cellSpacing=2 cellPadding=5 width=100% border=0>
<TR><TD class="nzone" bgColor=#ffdcd4>
	<h5>Example 3</h5>
	
	This is example still uses the same "_test.pas" source file and once more extended set of parameters:<br>
	<b>&nbsp;&nbsp;&nbsp;ppp.exe -sDelphi6 -c -t -i -xb -dMMM -gMMM _test.pas</b><br><br>

	This time we add "-i" and "-xb" switches. If you look at previous example you should see what 
	althrow we added switch to simulate Delphi6 compiler preprocessor (-sDelphi6) output file 
	still contains "Delphi5 or lower" string. This is because "JEDI.inc" file was not preprocessed.
	<br><br>
	Now we pass "-i" to preprocess INC files what preprocessor will meet in source file. And "-xb" 
	to let demonstrate usage of "inverting" options, so this invertion forced preprocessor not 
	include source of all INC files except pointed by "-bXXX" parameter ("bypass" them) in main PAS 
	file. In normal - not inverted - mode preprocessor should only "bypass" INC files pointer by 
	"-bXXX" parameter.
</TD></TR>
</TABLE><br>

<TABLE cellSpacing=2 cellPadding=5 width=100% border=0>
<TR><TD class="nzone" bgColor=#ffdcd4>
	<h5>Example 4</h5>
	
	This time I'll show how to use statistic counting mode. It can be usefull to collect statistics 
	on many files at once:<br>
	<b>&nbsp;&nbsp;&nbsp;ppp.exe -c -u *.pas</b><br><br>

	Just look at console output.
</TD></TR>
</TABLE><br>

<TABLE cellSpacing=2 cellPadding=5 width=100% border=0>
<TR><TD class="nzone" bgColor=#ffdcd4>
	<h5>Example 5</h5>
	
	Comment removing feature:<br>
	<b>&nbsp;&nbsp;&nbsp;ppp.exe -C _test.pas</b><br><br>

	"No comments." - in both means
</TD></TR>
</TABLE><br>

<TABLE cellSpacing=2 cellPadding=5 width=100% border=0>
<TR><TD class="nzone" bgColor=#ffdcd4>
	<h5>Example 6</h5>
	
	Unneeded preprocessor definitions removing:<br>
	<b>&nbsp;&nbsp;&nbsp;ppp.exe -yEXTERNALSYM -yHPPEMIT -yNODEFINE -yNOINCLUDE _test.pas</b><br><br>

	And: no unsupported by Delphi3 and pre versions of Delphi nasty preprocessor directives.
</TD></TR>
</TABLE><br>


<!-- ================================================== -->
<a name="find"><h4><hr>Where to find it?</h4></a>

Original redistributive of pascal preprocessor can be found at: 
<a href="http://clootie.narod.ru/delphi/download_utils.html#ppp">this link</a>

<br>If you have any suggestions or bug-reports, contact me: 
<a href="mailto:clootie@reactor.ru?Subject=Pascal preprocessor">Alexey Barkovoy</a>


<!-- ======================== Text end ========================== -->
</TD></TR>
</TABLE>
</TD></TR>
</TABLE>
<!-- ================= Footer Start ====================================================== -->
<br>
<TABLE cellspacing="0" cellpadding="0" width="630" border="0">
<TR>
<TD vAlign=top>
	<TABLE cellSpacing="0" cellPadding="0" width="100%" border="0">
	<TR>
		<TD class="copy_notes" vAlign="top" align="left" width="99%">
		<hr align="CENTER" size="1">
		
Please inform me of any grammar or general errors, containing on these pages, 
<a href="mailto:clootie@reactor.ru?Subject=Clootie Graphics Pages - Articles">Alexey Barkovoy</a><BR>
Last updated: 10-Mar-2002</TD>
<!-- ================= Date note ====================================================== -->

		<TD vAlign="top" align="center" width="1%">
<hr align="CENTER" size="1">		
<!-- SpyLOG v2 f:0211 -->
<script language="javascript">
u="u911.58.spylog.com";d=document;nv=navigator;na=nv.appName;p=1;
bv=Math.round(parseFloat(nv.appVersion)*100);
n=(na.substring(0,2)=="Mi")?0:1;rn=Math.random();z="p="+p+"&rn="+rn;y="";
y+="<a href='http://"+u+"/cnt?f=3&p="+p+"&rn="+rn+"' target=_blank>";
y+="<img src='http://"+u+"/cnt?"+z+
"&r="+escape(d.referrer)+"&pg="+escape(window.location.href)+"' border=0  width=88 height=31  alt='SpyLOG'>";
y+="</a>"; d.write(y);if(!n) { d.write("<"+"!--"); }//--></script><noscript>
<a href="http://u911.58.spylog.com/cnt?f=3&p=1" target=_blank>
<img src="http://u911.58.spylog.com/cnt?p=1" alt='SpyLOG' border='0'  width=88 height=31 >
</a></noscript><script language="javascript1.2"><!--
if(!n) { d.write("--"+">"); }//--></script>
<!-- SpyLOG  -->

		</TD></TR>
	</TABLE>
</TD></TR>
</TABLE>

</CENTER>

</BODY>
</HTML>
